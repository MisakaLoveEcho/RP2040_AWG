### RP2040AWG使用说明

1. 项目概述

​	本项目使用RP2040单片机，驱动两个12位并口DAC-AD9752以产生任意波形，可以用作信号发生器、信号源等，主频为250M时，可以轻松产生20Mhz以下的任意波形，使用拆机DAC的情况下，整机成本不超过30元，与常用的AD9833相比，价格更低，性能更强，使用更加灵活，性价比极高。

2. 参数介绍
   - RP2040
     - cotex-m0+内核，默认主频133Mhz，但是可以轻松超频到250Mhz使用，本项目是运行在250Mhz下的，一半频率125Mhz刚好是AD9752的极限频率。
     - 具有2个PIO，每个PIO有4个状态机，可以实现和单片机主频相同的操作频率，配合单周期DMA传输数据，可以完美实现高频DAC的驱动，本项目使用了1个PIO的2个状态机，4个DMA通道
   - AD9752
     - 12位并口DAC，最高采样率125Mhz
     - 输出电压与电流配置电阻和输出电阻的阻值有关，本项目配置为输出电压最大960mv，可以满足绝大多数使用场景
     - 输出使用一个无源滤波器滤波，实测-3db带宽在20Mhz左右
     - 输出有电压跟随器，并可手动选择交直流耦合
   - 供电
     - 使用TI的TPS62065降压输出3.3V为单片机、DAC、电荷泵供电，输入最大6V，输出最大3A电流
     - 使用LM27762产生正负3V为输出运放供电，输入为3.3V
   - 输出运放
     - 使用OPA2356高速运放，200M带宽，供电最大7V
   - 极限参数
     - RP2040在超频到300Mhz的情况下可以正常运行，但是代码无法上传了，输出40Mhz以下频率的正弦波可以长时间运行，超过40Mhz无法稳定运行，可能体质差异也会导致稳定运行的频率有所不同，在此情况下单片机和DAC都很烫，有条件的可以加点散热片
3. 使用说明
   - 下载固件
     - 本项目使用micropython编写，自行查阅RP2040下载固件的教程,本项目使用固件为RPI_PICO-20250415-v1.25.0.uf2
   - 下载main.py文件到RP2040中
     - 首先在VScode中安装Raspberry Pi Pico插件
     - 用VScode打开本项目文件，RP2040用USB线连接插入电脑，Pico插件会自动识别到板子（前提是正确上传了固件）
     - 将main.py下载到板子中，断开与插件的连接，复位板子后，可以看到LED闪烁，说明下载成功
   - 使用USB转TTL模块连接板子与电脑（USB旁边的接口），或者使用另一个单片机的串口与RP2040进行通信
4. 通信协议说明
   - 本设备使用串口通信，所有的指令均以\n结尾才能被本设备识别,参数之间使用逗号隔开
   - 波形设置指令格式“通道号，参数1：值，参数2：值，参数3：值”
     - 本设备有A，B两个通道号，可以单独设置，也可以AB一起设置为同样的参数，设置完成后直接输出
     - 可被设置的参数有5个
       - type:信号类型，有sin(正弦波)，sqe(方波)，trg(三角波)，sth(锯齿波)，dco(直流)
       - fre:信号频率，0-20M的整数，不能为0
       - amp：信号幅值，0-2047的整数，如果是直流信号可以设置为0-4095
       - phase：信号相位，0-360°的整数，只有sin和sqe可以设置相位，其他信号设置无用
       - offset：信号偏置，0-4096整数，直流信号偏置为0
     - 示例
       - A,type:sin,fre:1000,amp:2000,phase:90\n    //通道A输出1000hz，2000幅值，90°相位的正弦波
       - B,fre:2000,type:sqe\n                                        //通道B输出2000hz方波，其他参数不变
       - AB，type:sin,fre:114514\n                               //通道AB输出114514hz正弦波，其他参数不变
     - 注意：设置成功会有返回语；除了通道号必须在首位，其他参数没有先后顺序；没设置的参数会沿用默认值或上一次的值；参数名写错或者参数值超出范围都会返回错误；想关闭输出可以把amp设置为0；
   - 特殊指令 
     -  read：返回两个通道的所有参数
     -  sync：同步两个通道的输出，用在严格同频信号，需要指定相位差时，需要同步信号
     -  default：两个通道的参数设置为默认值并输出
     -  rst：重启设备
5. 注意事项

- 只有LED闪烁才说明程序在正常运行，LED超过10s不闪说明卡住了，要手动复位
- 遇到超频导致无法下载代码时，使用烧录固件的方法，将文件夹下清除flash的固件(pico-erase-flash_nuke_Flash擦除-解决Pico假死.uf2)先下载，过一会再下载系统固件(RPI_PICO-20250415-v1.25.0.uf2)，然后就可以再次下载代码了
